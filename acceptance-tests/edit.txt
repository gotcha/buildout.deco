*** Settings ***
Resource  deco.txt

Suite setup  Log in  admin  admin

Test setup  Edit deco page

*** Test cases ***

Enter edit mode
    [Tags]  deco

    No operation

Switch tile
    [Tags]  deco
    
    Click element  css=.documentDescription  don't wait
    Wait until page contains element  css=.deco-selected-tile .documentDescription
    ${description} =  Get text  css=.deco-selected-tile .documentDescription
    Should be equal  ${description}  for acceptance test

Delete tile
    [Tags]  deco
    
    Click element  css=.documentDescription  don't wait
    Wait until page contains element  css=.deco-close-icon
    Click element  css=.deco-close-icon  don't wait
    Wait until notification  Application tile removed

Cancel edit
    [Tags]  deco  current
    
    Wait until page contains element  css=.documentDescription
    Click element  css=.documentDescription  don't wait
    Wait until page contains element  css=.deco-selected-tile

    Wait until page contains element  css=.deco-close-icon
    Click element  css=.deco-close-icon  don't wait
    Wait until notification  Application tile removed

    Click Cancel menu button
    Wait until notification  Edit cancelled
    Page should contain  for acceptance test

Drag and drop description tile
    [Tags]  deco 
 
    Wait until page contains element  css=.deco-selected-tile
    Mouse over  css=.deco-plone\\.app\\.standardtiles\\.description-tile
    Wait until page contains element  css=.deco-plone\\.app\\.standardtiles\\.description-tile .deco-drag-handle
    Mouse down at  css=.deco-plone\\.app\\.standardtiles\\.description-tile .deco-drag-handle  350,370
    Mouse move at  css=.deco-plone\\.app\\.standardtiles\\.description-tile .deco-drag-handle  355,365
    Mouse move  css=.deco-plone\\.app\\.standardtiles\\.title-tile
    Mouse up  css=.deco-plone\\.app\\.standardtiles\\.title-tile
    Should be above  css=.documentDescription  css=.deco-plone\\.app\\.standardtiles\\.title-tile

*** Keywords ***

Edit deco page
    Go to  ${PLONE_URL}/deco-page
    Page should contain  Deco page
    Deco edit
